#!/bin/bash

# å»ºç½®è…³æœ¬
echo "ğŸš€ é–‹å§‹å»ºç½®å°ˆæ¡ˆ..."

# æ¸…ç†èˆŠçš„å»ºç½®æª”æ¡ˆ
echo "ğŸ§¹ æ¸…ç†èˆŠçš„å»ºç½®æª”æ¡ˆ..."
npm run clean

# å®‰è£ä¾è³´
echo "ğŸ“¦ æª¢æŸ¥ä¾è³´..."
if [ ! -d "node_modules" ]; then
    echo "ğŸ“¥ å®‰è£ä¾è³´..."
    npm install
fi

# åŸ·è¡Œç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥
echo "ğŸ” åŸ·è¡Œç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥..."
npm run lint

# åŸ·è¡Œæ¸¬è©¦
echo "ğŸ§ª åŸ·è¡Œæ¸¬è©¦..."
npm test

# å»ºç½®å°ˆæ¡ˆ
echo "ğŸ”¨ å»ºç½®å°ˆæ¡ˆ..."
npm run build

# æª¢æŸ¥å»ºç½®çµæœ
if [ -d "dist" ]; then
    echo "âœ… å»ºç½®æˆåŠŸï¼"
    echo "ğŸ“ è¼¸å‡ºç›®éŒ„: dist/"
    echo "ğŸ“Š å»ºç½®æª”æ¡ˆ:"
    ls -la dist/
else
    echo "âŒ å»ºç½®å¤±æ•—ï¼"
    exit 1
fi

echo "ğŸ‰ å»ºç½®å®Œæˆï¼"
